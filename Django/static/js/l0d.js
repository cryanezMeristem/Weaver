(this.webpackJsonpl0d=this.webpackJsonpl0d||[]).push([[0],{214:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(10),i=s.n(n),o=s(107),h=s(218);var l={ytk:{name:"Yeast Toolkit",enzyme:"bsmbi",bases_upto_snip:"a",l0_receiver:{name:"L0R-GFP",ohs:{oh5:"CTCC",oh3:"CGAG"}},domestication_enzymes:["bsmbi","bsai"],default:{5:"12",3:"23"},ohs:{81:{name:"8-1",oh:"CCCT"},12:{name:"1-2",oh:"AACG"},23:{name:"2-3",oh:"TATG"},"3a3b":{name:"3a-3b",oh:"TTCT",prev_bases:"gg"},34:{name:"3-4",oh:"ATCC",stop:!0},"4a4b":{name:"4a-4b",oh:"TGGC"},45:{name:"4-5",oh:"GCTG"},56:{name:"5-6",oh:"TACA"},67:{name:"6-7",oh:"GAGT"},78:{name:"7-8",oh:"CCGA"},"8a8b":{name:"8a-8b",oh:"CAAT"}}},loop:{name:"Loop",enzyme:"sapi",bases_upto_snip:"a",l0_receiver:{name:"pL0R-mRFP1",ohs:{oh5:"TCC",oh3:"CGA"}},domestication_enzymes:["aari","bsai","sapi"],default:{5:"a",3:"b"},ohs:{a:{name:"A",oh:"GGAG"},b:{name:"B",oh:"TACT"},c:{name:"C",oh:"AATG"},d:{name:"D",oh:"AGGT",prev_bases:"tc"},e:{name:"E",oh:"GCTT",stop:!0},f:{name:"F",oh:"CGCT"}}},gb:{name:"GoldenBraid 2.0",enzyme:"bsmbi",bases_upto_snip:"a",domestication_enzymes:["bsai","bsmbi"],l0_receiver:{name:"pUPD",ohs:{oh5:"CTCG",oh3:"CGAG"}},default:{5:"a1_5",3:"a2_5"},ohs:{a1_5:{name:"A1 5'",oh:"GGAG"},a2_5:{name:"A2 5'",oh:"TGAC"},a3_5:{name:"A3 5'",oh:"TCCC"},b1_5:{name:"B1 5'",oh:"TACT"},b2_5:{name:"B2 5'",oh:"CCAT"},b3_5:{name:"B3 5'",oh:"AATG"},b4_5:{name:"B4 5'",oh:"AGCC",prev_bases:"tc"},b5_5:{name:"B5 5'",oh:"TTCG",prev_bases:"tc"},b6_5:{name:"B6 5'",oh:"GCTT",prev_bases:"tc"},c1_5:{name:"C1 5'",oh:"GGTA"},c1_3:{name:"C1 3'",oh:"CGCT"}}},moclo:{name:"MoClo",enzyme:"bpii",bases_upto_snip:"aa",default:{5:"a",3:"b"},l0_receiver:{name:"",ohs:{oh5:"",oh3:""}},domestication_enzymes:["bsai","bpii"],ohs:{a:{name:"A",oh:"GGAG"},b:{name:"B",oh:"TACT"},c:{name:"C",oh:"AATG"},d:{name:"D",oh:"AGGT",prev_bases:"tc"},e:{name:"E",oh:"GCTT",prev_bases:"tc"},f:{name:"F",oh:"CGCT"}}}},c=s(12);function p(e){return e.replace(/[^acgtACGT]/g,"")}function d(e){return{A:"T",T:"A",G:"C",C:"G",a:"t",t:"a",g:"c",c:"g"}[e]}function m(e){return function(e){return e.split("").reverse().join("")}(function(e){return e.split("").map(d).join("")}(e))}function b(e,t){if(e.length>=7){let s="minTempNotReached";for(let a=7;a<e.length;a++)if(Object(c.calculateTm)(e.substring(0,a))>t){s=e.substring(0,a);break}return s}return"minLengthError"}var j=s(105),u=s(31),x=s(13),g=s(11),O=s(106),C=s(104),f=s(17),v=s.n(f),_=s(1);class y extends a.Component{render(){if(this.props.text){let e="";switch(this.props.type){case"eswen":e="Restriction site";break;case"doh":e="Domestication overhang";break;case"oh":e="Overhang";break;case"seq":e="Sequence";break;case"res":e="Internal restriction site";break;case"res_dom":e="Internal restriction site (domesticated)";break;case"prev_bases":e="Overhang complement bases for frame conservation";break;case"stop":e="Stop codon"}return this.props.extra&&(e+=" "+this.props.extra),Object(_.jsx)(O.a,{placement:"top",overlay:Object(_.jsx)(C.a,{id:"id"+this.props.key,children:e}),children:Object(_.jsx)("span",{className:"hl hl-"+this.props.type,children:this.props.text})},"ot"+this.props.key)}return Object(_.jsx)("i",{})}}class N extends r.a.Component{render(){let e="";this.props.step<5&&(e=Object(_.jsx)("button",{className:"btn btn-success float-end",onClick:()=>{this.props.stepHandler(this.props.step+1)},children:"Next"}));let t="";this.props.step>1&&(t=Object(_.jsx)("button",{className:"btn btn-secondary float-end me-2",onClick:()=>{this.props.stepHandler(this.props.step-1)},children:"Prev"}));let s="",a="";return"t"===this.props.position&&(a=Object(_.jsx)("hr",{})),"b"===this.props.position&&(s=Object(_.jsx)("hr",{})),Object(_.jsxs)("div",{className:"col-12",children:[s,Object(_.jsxs)("div",{className:"flow_root",children:[e,t]}),a]})}}class w extends a.Component{render(){const e=l[this.props.standard];return Object(_.jsxs)(u.a.Select,{onChange:this.props.handler,value:this.props.cv,"aria-label":e.name+" OHs / "+this.props.oh+"'",className:"oh-select",ref:"ref"+this.props.oh,children:[Object.keys(e.ohs).map((t=>Object(_.jsx)("option",{value:t,children:e.ohs[t].name+" - "+e.ohs[t].oh+(e.ohs[t].prev_bases?" [ "+e.ohs[t].prev_bases+" ]":"")+(e.ohs[t].stop?" [ STOP ]":"")},t))),Object(_.jsx)("option",{value:"custom",children:"Custom"},"custom")]})}}class T extends a.Component{render(){return Object(_.jsx)(g.a,{controlId:"ohs"+this.props.oh,label:this.props.standard+" OHs / "+this.props.oh+"'",children:Object(_.jsx)(w,{standard:this.props.standard,oh:this.props.oh,handler:this.props.handler,cv:this.props.cv})})}}class H extends a.Component{render(){return Object(_.jsxs)("tr",{children:[Object(_.jsxs)("th",{scope:"row",children:[this.props.type," ",Object(_.jsx)("i",{className:"bi bi-clipboard copy_clipboard","data-cc":this.props.name+"-"+this.props.type})]}),Object(_.jsx)("td",{children:this.props.seq.length}),Object(_.jsxs)("td",{children:[Object(_.jsx)("i",{className:"bi bi-clipboard copy_clipboard","data-cc":this.props.seq})," ",this.props.seq]})]})}}class I extends a.Component{render(){const e=this.props.name+"-F"+(this.props.idx+1);let t=[];const s=this.props.eswen+this.props.extra5+this.props.template+this.props.extra3+m(this.props.eswen);let a="pcr",r="PCR",n="";if(s.length<=this.props.pcrMinLength&&(a="oann",r="GBlock or Oligo Annealing"),"oann"===a)t.push(Object(_.jsx)(H,{seq:s,name:e,type:"F"})),t.push(Object(_.jsx)(H,{seq:m(s),name:e,type:"R"}));else{let s=b(this.props.template,this.props.pcrTm),a=b(m(this.props.template),this.props.pcrTm);"minTempNotReached"!==s&&"minLengthError"!==s||(s=this.props.template,a=m(this.props.template),"minTempNotReached"===s&&(n=Object(_.jsx)("div",{className:"alert alert-danger",children:"Tm below min requirement"})),"minLengthError"===s&&(n=Object(_.jsx)("div",{className:"alert alert-danger",children:"Template length below min requirement (7 bp)"})));const r=this.props.eswen+this.props.extra5+s;t.push(Object(_.jsx)(H,{seq:r,name:e,type:"F"}));const i=this.props.eswen+m(this.props.extra3)+a;t.push(Object(_.jsx)(H,{seq:i,name:e,type:"R"}))}return Object(_.jsxs)("div",{className:"alert alert-light border text-break",children:[Object(_.jsxs)("h5",{children:[Object(_.jsx)("span",{className:"badge bg-secondary text-light",children:e}),Object(_.jsxs)("span",{className:"small fw-light ms-2",children:[r," / ",s.length," bp"]})]}),n,Object(_.jsxs)("table",{className:"table small",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{scope:"col",children:"Type"}),Object(_.jsx)("th",{scope:"col",children:"Length"}),Object(_.jsx)("th",{scope:"col",children:"Seq"})]})}),Object(_.jsx)("tbody",{children:t})]})]})}}class q extends a.Component{constructor(e){super(e),this.resInputHandle=(e,t)=>{this.props.resInputHandle(e,t)},void 0===e.new_res&&this.resInputHandle(this.props.res.idx,this.props.res.seq)}getNucleotidesFromIUPAC(e){switch(e.toLowerCase()){case"a":return["a"];case"t":return["t"];case"c":return["c"];case"g":return["g"];case"r":return["g","a"];case"y":return["t","c"];case"m":return["a","c"];case"k":return["g","t"];case"s":return["g","c"];case"w":return["a","t"];case"h":return["a","c","t"];case"b":return["g","t","c"];case"v":return["g","c","a"];case"d":return["g","a","t"];case"n":return["g","a","c","t"];default:return e}}generateVariations(e){if(1===e.length)return this.getNucleotidesFromIUPAC(e);const t=[],s=this.getNucleotidesFromIUPAC(e.charAt(0)),a=this.generateVariations(e.substring(1,e.length));return s.forEach((e=>{a.forEach((s=>{t.push(e+s)}))})),t}getVariation(e){if(3!==e.length)return alert("Domestication site length != 3"),!1;const t=c.aminoAcidToDegenerateDnaMap[Object(c.getAminoAcidFromSequenceTriplet)(e).value.toLowerCase()],s=this.generateVariations(t);let a=!1;return s.forEach((t=>{t!==e&&(a=t)})),a}recommended_codon(){const e=this.props.new_res,t=this.props.res;if(e&&e.length>=3){let s=t.seq.substring(0,t.start%3);const a=t.seq.substring(t.start%3,t.start%3+3),r=this.getVariation(a);return r?(s+=r,s+=t.seq.substring(t.start%3+3,e.length),s):(alert("No variation found"),t)}return alert("No Restriction enzyme site set"),""}render(){if(this.props.res){let e="",t=this.props.res,s=this.props.new_res?this.props.new_res:"";t.seq.toLowerCase()===s.toLowerCase()&&(e=Object(_.jsx)("div",{className:"alert alert-danger",children:"Restriction site unchanged"}));let a="";t.seq.length!==s.length&&s.length>0&&(a=Object(_.jsx)("div",{className:"alert alert-warning",children:"New restriction site has different length than original"}));let r="";if(s){let e=s.substring(0,t.start%3)+"-";1===e.length&&(e=""),r=" ("+e+s.substring(t.start%3,t.start%3+3)+")"}const n=this.recommended_codon();return Object(_.jsxs)("div",{className:"alert alert-info border",children:[Object(_.jsxs)("h5",{children:["Restriction site # ",t.idx+1]}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-7",children:[Object(_.jsx)(g.a,{controlId:"resInput"+t.idx,label:"New restriction enzyme site",children:Object(_.jsx)(x.a,{onChange:e=>this.resInputHandle(t.idx,e.target.value),value:s,"aria-label":"New restriction enzyme site"})}),Object(_.jsxs)("div",{className:"mb-2",children:[Object(_.jsx)("button",{type:"button",className:"btn btn-secondary me-2",onClick:e=>this.resInputHandle(t.idx,t.seq),children:"Reset"}),Object(_.jsx)("button",{type:"button",className:"btn btn-success me-2",onClick:e=>this.resInputHandle(t.idx,n),children:"Recommended"})]})]}),Object(_.jsx)("div",{className:"col-5",children:Object(_.jsxs)("div",{className:"mb-2 small",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)("strong",{children:"Enzyme"}),": ",t.enzyme]}),Object(_.jsx)("br",{}),Object(_.jsxs)("span",{children:[Object(_.jsx)("strong",{children:"Position"}),": ",t.start+1+" to "+(t.end+1)]}),Object(_.jsx)("br",{}),Object(_.jsxs)("span",{children:[Object(_.jsx)("strong",{children:"Frame position"}),": ",t.start%3+1+r]}),Object(_.jsx)("br",{})]})})]}),e,a]})}return Object(_.jsx)("div",{})}}class A extends a.Component{constructor(e){super(e),this.resInputHandle=(e,t)=>{let s=this.state.new_res;s[e]=p(t),this.setState({new_res:s,apiCall_result:[]})},this.stepHandler=e=>{this.props.stepHandler(e)};let t=[];e.res.forEach((e=>{t.push(e.seq)})),this.state={new_res:t,apiCall_result:[]}}componentWillReceiveProps(e){let t=[];e.res.forEach((e=>{t.push(e.seq)})),this.setState({new_res:t,apiCall_result:[]})}commonStart(e,t){let s="";for(var a=0;a<Math.min(e.length,t.length)&&e.charAt(a).toLowerCase()===t.charAt(a).toLowerCase();a++)s+=e.charAt(a);return s}firstCommonIndexAfterDiff(e,t){let s=null,a=!1;if(e.length===t.length)for(var r=0;r<t.length;r++)if(e.charAt(r).toLowerCase()===t.charAt(r).toLowerCase()){if(a&&e.substring(r,t.length)===t.substring(r,t.length)){s=r;break}}else a=!0;return s}lastCommonIndex(e,t){let s=0;for(var a=0;a<Math.min(e.length,t.length)&&e.charAt(a).toLowerCase()===t.charAt(a).toLowerCase();a++)s=a;return s}resParts(e,t){const s=this.lastCommonIndex(e,t),a=this.firstCommonIndexAfterDiff(e,t);let r=e.substring(0,s+1),n="",i="";return a?(n=e.substring(s+1,a),i=e.substring(a,e.length)):n=e.substring(s+1,e.length),{start:r,diff:n,end:i}}formatOHEnd(e,t){return e.substring(0,e.length-t).toLowerCase()+e.substring(e.length-t,e.length).toUpperCase()}formatOH(e,t){return e.substring(0,t).toUpperCase()+e.substring(t,e.length).toLowerCase()}apiCall(e){this.setState({apiCall_result:{wait:!0}});const t="/inventory/api/fidelity_calc/sapi/"+e.join("-");h.a.get(t).then((e=>{var t=e.data.ligation_frequency_matrix_html.replaceAll("container","lfm_container");t=(t=t.replaceAll("row","lfm_row")).replaceAll("cell","lfm_cell"),this.setState({apiCall_result:{fidelity:e.data.fidelity,render:t}})})).catch((e=>{this.setState({apiCall_result:{error:e}})}))}render(){let e=[],t=[],s=[],a="",r=[];r.push(Object(_.jsx)("h3",{children:"Restriction sites"}));let n=!1,i=[],o="",h="",l="",c=[],p=!1;const d="tga",b=Math.abs(this.props.the_re.topSnipOffset-this.props.the_re.bottomSnipOffset);if(c.push(this.props.l0_receiver.ohs.oh5),s.push(Object(_.jsx)(y,{text:this.props.eswen,type:"eswen",extra:" ("+this.props.the_re.name+")"},"1")),a+=this.props.eswen,s.push(Object(_.jsx)(y,{text:this.props.l0_receiver.ohs.oh5,type:"doh"},"2")),a+=this.props.l0_receiver.ohs.oh5,o+=this.props.l0_receiver.ohs.oh5.toUpperCase(),s.push(Object(_.jsx)(y,{text:this.props.oh5.oh,extra:this.props.oh5.name,type:"oh"},"3")),a+=this.props.oh5.oh,o+=this.props.oh5.oh.toUpperCase(),this.props.res.length){let e=0;this.props.res.forEach(((t,d)=>{s.push(Object(_.jsx)(y,{text:this.props.seq.substring(e,t.start),type:"seq",extra:" fragment "+(d+1)},"s-"+d)),a+=this.props.seq.substring(e,t.start);let m=this.props.seq.substring(e,t.start),j="res",u=t.seq;if(this.state.new_res[d]&&this.state.new_res[d]!==t.seq&&(j="res_dom",u=this.state.new_res[d]),s.push(Object(_.jsx)(y,{text:u,type:j,extra:" # "+(d+1)},"r-"+d)),a+=u,m+=this.commonStart(this.state.new_res[d],t.seq),d){const e=this.resParts(this.state.new_res[d-1],this.props.res[d-1].seq);o=this.formatOH(e.diff,b),m=this.formatOH(e.end+m,b-o.length),c.push((e.diff+m).substring(0,b).toUpperCase())}const x=this.resParts(this.state.new_res[d],t.seq);if(h=this.formatOH((x.diff+x.end+this.props.seq.substring(t.end+1,this.props.seq.length)).substring(0,b),b),d!==this.props.res.length-1&&(m=this.formatOHEnd(m,b-h.length)),h.length<b&&(l=Object(_.jsx)("div",{className:"alert alert-danger",children:"OH length under optimal length"})),i.push({idx:d,extra5:o,template:m,extra3:h}),r.push(Object(_.jsx)(q,{resInputHandle:this.resInputHandle,new_res:this.state.new_res[d],res:t})),t.seq.toLowerCase()===this.state.new_res[d].toLowerCase()&&(p=!0),r.push(l),n=!0,e=t.end+1,d===this.props.res.length-1){s.push(Object(_.jsx)(y,{text:this.props.seq.substring(t.end+1,this.props.seq.length),type:"seq",extra:" fragment "+(d+2)},"s-"+(d+1))),a+=this.props.seq.substring(t.end+1,this.props.seq.length);const r=this.resParts(this.state.new_res[d],t.seq);o=this.formatOH(r.diff,b),m=this.formatOH(r.end+this.props.seq.substring(e,this.props.seq.length),b-o.length),c.push((r.diff+m).substring(0,b).toUpperCase()),i.push({idx:d+1,extra5:o,template:m,extra3:""})}}))}else s.push(Object(_.jsx)(y,{text:this.props.seq,type:"seq"},"s-1")),a+=this.props.seq,i.push({idx:0,extra5:o,template:this.props.seq.toLowerCase(),extra3:""});s.push(Object(_.jsx)(y,{text:this.props.oh3.prev_bases?this.props.oh3.prev_bases:"",type:"prev_bases"},"6")),a+=this.props.oh3.prev_bases?this.props.oh3.prev_bases:"",h=this.props.oh3.prev_bases?this.props.oh3.prev_bases:"",s.push(Object(_.jsx)(y,{text:this.props.oh3.stop?d:"",type:"stop"},"7")),a+=this.props.oh3.stop?d:"",h+=this.props.oh3.stop?d:"",s.push(Object(_.jsx)(y,{text:this.props.oh3.oh,extra:this.props.oh3.name,type:"oh"},"8")),a+=this.props.oh3.oh,h+=this.props.oh3.oh.toUpperCase(),s.push(Object(_.jsx)(y,{text:this.props.l0_receiver.ohs.oh3,type:"doh"},"9")),a+=this.props.l0_receiver.ohs.oh3,h+=this.props.l0_receiver.ohs.oh3.toUpperCase(),c.push(this.props.l0_receiver.ohs.oh3),s.push(Object(_.jsx)(y,{text:m(this.props.eswen),type:"eswen",extra:" (RevComp) ("+this.props.the_re.name+")"},"10")),a+=m(this.props.eswen),i[i.length-1].extra3=h,i.forEach((e=>{t.push(Object(_.jsx)(I,{name:this.props.name,pcrMinLength:this.props.pcrMinLength,pcrTm:this.props.pcrTm,idx:e.idx,extra5:e.extra5,extra3:e.extra3,template:e.template,eswen:this.props.eswen}))})),n||r.push(Object(_.jsx)("div",{className:"alert alert-info",children:"No domestication sites"})),r.push(Object(_.jsxs)("h3",{children:["Ligation overhangs",Object(_.jsx)("i",{className:"bi bi-clipboard copy_clipboard ms-2","data-cc":c.join(",")})]}));let j=[];j.push(Object(_.jsxs)("div",{className:"alert alert-warning",children:["Overhangs: ",c.join(" + ")]})),this.state.apiCall_result.wait?j.push(Object(_.jsxs)("button",{className:"btn btn-success",onClick:()=>{this.apiCall()},children:["Wait ",Object(_.jsx)("span",{class:"spinner-grow spinner-grow-sm text-light",role:"status",children:Object(_.jsx)("span",{class:"visually-hidden",children:"Loading..."})})]})):this.state.apiCall_result.fidelity?(j.push(Object(_.jsxs)("div",{className:"alert alert-success",children:["Ligation Fidelity: ",this.state.apiCall_result.fidelity,"%"]})),j.push(Object(_.jsxs)("div",{className:"alert alert-light",children:[Object(_.jsx)("h4",{children:"Ligation fidelity matrix"}),Object(_.jsx)("div",{id:"fidelity_result",dangerouslySetInnerHTML:{__html:this.state.apiCall_result.render}})]})),j.push(Object(_.jsxs)("div",{className:"alert alert-info",children:["Conditions: SapI / 37-16 cycling. Using ",Object(_.jsxs)("a",{href:"https://ligasefidelity.neb.com/viewset/run.cgi",target:"_blank",rel:"noreferrer",children:["NEBridge Ligase Fidelity Viewer ",Object(_.jsx)("i",{className:"bi bi-box-arrow-up-right"})]})]}))):(this.state.apiCall_result.error&&j.push(Object(_.jsxs)("div",{className:"alert alert-danger",children:["Error. Try again. [",this.state.apiCall_result.error,"]"]})),j.push(Object(_.jsx)("button",{className:"btn btn-success",onClick:()=>{this.apiCall(c)},children:"Estimate fidelity"}))),r.push(Object(_.jsx)("div",{className:"alert alert-light border text-break",children:Object(_.jsx)("div",{className:"mb-2",children:j})})),r.push(Object(_.jsx)(N,{step:3,position:"b",stepHandler:this.stepHandler}));let u=a.substring(this.props.eswen.length+this.props.l0_receiver.ohs.oh5.length+this.props.oh5.oh.length,a.length-this.props.eswen.length-this.props.l0_receiver.ohs.oh3.length-this.props.oh3.oh.length);return p&&(e.unshift(Object(_.jsx)("div",{className:"alert alert-danger",children:"Restriction site domestication(s) pending"})),t.unshift(Object(_.jsx)("div",{className:"alert alert-danger",children:"Restriction site domestication(s) pending"}))),e.unshift(Object(_.jsxs)("h3",{children:[this.props.name," ",Object(_.jsx)("i",{className:"bi bi-clipboard copy_clipboard ms-2","data-cc":a})," ",Object(_.jsx)("span",{className:"badge text-dark",children:Object(_.jsxs)("form",{method:"POST",action:"/inventory/plasmid/create/l0d",target:"_blank",class:"default-style",children:[Object(_.jsx)("input",{type:"hidden",name:"oh5-name",value:this.props.oh5.name}),Object(_.jsx)("input",{type:"hidden",name:"oh5-oh",value:this.props.oh5.oh}),Object(_.jsx)("input",{type:"hidden",name:"oh3-name",value:this.props.oh3.name}),Object(_.jsx)("input",{type:"hidden",name:"oh3-prev_bases",value:this.props.oh3.prev_bases?this.props.oh3.prev_bases:""}),Object(_.jsx)("input",{type:"hidden",name:"oh3-stop",value:this.props.oh3.stop?d:""}),Object(_.jsx)("input",{type:"hidden",name:"oh3-oh",value:this.props.oh3.oh}),Object(_.jsx)("input",{type:"hidden",name:"name",value:this.props.name}),Object(_.jsx)("input",{name:"csrfmiddlewaretoken",value:window.csrf_token,type:"hidden"}),Object(_.jsx)("input",{type:"hidden",name:"seq",value:u}),Object(_.jsxs)("button",{className:"btn btn-primary btn-sm",type:"submit",children:["Create plasmid ",Object(_.jsx)("i",{className:"bi bi-box-arrow-up-right"})]})]})})]})),e.push(Object(_.jsx)("div",{className:"alert alert-light border text-break",children:s})),e.push(Object(_.jsx)(N,{step:4,position:"b",stepHandler:this.stepHandler})),t.push(Object(_.jsx)(N,{step:5,position:"b",stepHandler:this.stepHandler})),[Object(_.jsx)("div",{className:"collapse",children:r}),Object(_.jsx)("div",{className:"collapse text-break",children:e}),Object(_.jsx)("div",{className:"collapse",children:t})]}}const S="ytk",G={sequence:"",standard:S,custom_oh5:"",custom_oh3:"",oh5:l[S].default[5],oh3:l[S].default[3],pcrTm:60,pcrMinLength:80,name:"Part",base_pairs_from_end:"aa",enzymes:l[S].domestication_enzymes};class k extends a.Component{constructor(e){super(e),this.resetState=()=>{this.setState(G)},this.basePairsFromEndInputChangeHandle=e=>{this.setState({base_pairs_from_end:e.target.value})},this.domEnzymesInputChangeHandle=e=>{let t=[];e.forEach((e=>{t.push(e.value)})),this.setState({enzymes:t})},this.pcrMinLengthInputChangeHandle=e=>{this.setState({pcrMinLength:e.target.value})},this.pcrTmInputChangeHandle=e=>{this.setState({pcrTm:e.target.value})},this.nameInputChangeHandle=e=>{this.setState({name:e.target.value})},this.sequenceInputChangeHandle=e=>{this.setState({sequence:p(e.target.value)})},this.partStandardChangeHandle=e=>{const t=l[e.target.value];t&&this.setState({standard:e.target.value,oh5:t.default[5],oh3:t.default[3],enzymes:t.domestication_enzymes})},this.OH5InputChangeHandle=e=>{this.setState({oh5:e.target.value})},this.OH3InputChangeHandle=e=>{this.setState({oh3:e.target.value})},this.customOh5InputHandle=e=>{this.setState({custom_oh5:p(e.target.value)})},this.customOh3InputHandle=e=>{this.setState({custom_oh3:p(e.target.value)})},this.partStandardInputItems=Object.keys(l).map((function(e){return Object(_.jsx)("option",{value:e,children:l[e].name},e)})),this.getEnzymesSelect=e=>{let t=[];return e.forEach((e=>{t.push({value:e,label:c.aliasedEnzymesByName[e].name})})),t},this.state=G}findInFrame(e,t){for(let s=0;s<e.length;s++)for(let a=0;a<t.length;a+=3)if(e[s].toLowerCase()===t.substring(a,a+3).toLowerCase())return a;return!1}stepHandler(e){v()("#steps").children().removeClass("show"),v()("#steps > *:nth-child("+e+")").addClass("show");let t=v()("#pagination").children(),s=v()("#pagination > *:nth-child("+e+")");t.removeClass("active"),s.addClass("active"),t.each((function(){v()(this).find("span:first-child").removeClass("bg-light").removeClass("text-primary").addClass("bg-"+v()(this).attr("data-color")),v()(this).find("button span:last-child").addClass("text-"+v()(this).attr("data-color"))})),s.find("button span:first-child").addClass("bg-light").addClass("text-primary"),s.find("button span:last-child").removeClass("text-"+s.attr("data-color"))}componentDidUpdate(){window.onReady()}componentDidMount(){}render(){const e=l[this.state.standard],t=[];let s,a;Object.keys(c.aliasedEnzymesByName).forEach((function(e,s){c.aliasedEnzymesByName[e].isType2S&&t.push({value:e,label:c.aliasedEnzymesByName[e].name})})),"custom"===this.state.oh5&&(s=Object(_.jsx)(g.a,{controlId:"customOh5Input",label:"Custom OH 5'",children:Object(_.jsx)(x.a,{onChange:this.customOh5InputHandle,value:this.state.custom_oh5,"aria-label":"Custom OH 5"})})),"custom"===this.state.oh3&&(a=Object(_.jsx)(g.a,{controlId:"customOh3Input",label:"Custom OH 3'",children:Object(_.jsx)(x.a,{onChange:this.customOh3InputHandle,value:this.state.custom_oh3,"aria-label":"Custom OH 3"})}));const r=this.state.sequence.toLowerCase();let n=[];if(r){let t=[];this.state.enzymes.forEach((e=>{t.push(c.aliasedEnzymesByName[e])}));const s=Object(c.getCutsitesFromSequence)(r,!0,t);let a=[];Object.keys(s).length&&Object.entries(s).forEach((e=>{let[t,s]=e;s.forEach(((e,t)=>{const s=e.recognitionSiteRange.start,n=e.recognitionSiteRange.end;s<n&&a.push({seq:r.substring(e.recognitionSiteRange.start,e.recognitionSiteRange.end+1),start:s,end:n,enzyme:e.name})})),a.sort((function(e,t){return e.start-t.start})),a.forEach(((e,t)=>{e.idx=t}))}));const i=c.aliasedEnzymesByName[e.enzyme],o=this.state.base_pairs_from_end+i.site.toUpperCase()+e.bases_upto_snip;let h={name:"Custom",oh:this.state.custom_oh5};"custom"!==this.state.oh5&&(h=e.ohs[this.state.oh5]);let l={name:"Custom",oh:this.state.custom_oh3};"custom"!==this.state.oh3&&(l=e.ohs[this.state.oh3]),n=Object(_.jsx)(A,{name:this.state.name,pcrMinLength:this.state.pcrMinLength,pcrTm:this.state.pcrTm,the_re:i,res:a,oh5:h,oh3:l,l0_receiver:e.l0_receiver,eswen:o,seq:r,stepHandler:this.stepHandler})}else n=[Object(_.jsxs)("div",{className:"collapse",children:[Object(_.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(_.jsx)(N,{step:3,position:"b",stepHandler:this.stepHandler})]}),Object(_.jsxs)("div",{className:"collapse",children:[Object(_.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(_.jsx)(N,{step:4,position:"b",stepHandler:this.stepHandler})]}),Object(_.jsxs)("div",{className:"collapse",children:[Object(_.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(_.jsx)(N,{step:5,position:"b",stepHandler:this.stepHandler})]})];let i=Object(_.jsx)("div",{className:"alert alert-alert border",children:"No ATG found in frame 1"}),h=Object(_.jsx)("div",{className:"alert alert-light border",children:"No STOP codon found in frame 1"}),p=this.findInFrame(["atg"],r),d=this.findInFrame(["taa","tga","tag"],r);return!1!==p&&(i=Object(_.jsxs)("div",{className:"alert alert-success",children:["ATG found in frame 1, position ",p+1]})),!1!==d&&(h=Object(_.jsxs)("div",{className:"alert alert-danger",children:["STOP codon found in frame 1, position ",d+1]})),Object(_.jsxs)(j.a,{children:[Object(_.jsxs)("div",{className:"flow_root",children:[Object(_.jsx)("nav",{"aria-label":"Page navigation",className:"float-start",children:Object(_.jsxs)("ul",{id:"pagination",className:"pagination",children:[Object(_.jsx)("li",{className:"page-item active","data-color":"primary",onClick:()=>{this.stepHandler(1)},children:Object(_.jsxs)("button",{className:"page-link",children:[Object(_.jsx)("span",{className:"badge bg-light text-primary",children:"Step 1"}),Object(_.jsx)("span",{className:"ms-1",children:"Standard, enzymes & params"})]})}),Object(_.jsx)("li",{className:"page-item","data-color":"primary",onClick:()=>{this.stepHandler(2)},children:Object(_.jsxs)("button",{className:"page-link",children:[Object(_.jsx)("span",{className:"badge bg-primary",children:"Step 2"}),Object(_.jsx)("span",{className:"ms-1",children:"Sequence"})]})}),Object(_.jsx)("li",{className:"page-item","data-color":"primary",onClick:()=>{this.stepHandler(3)},children:Object(_.jsxs)("button",{className:"page-link",children:[Object(_.jsx)("span",{className:"badge bg-primary",children:"Step 3"}),Object(_.jsx)("span",{className:"ms-1",children:"Domestication"})]})}),Object(_.jsx)("li",{className:"page-item","data-color":"success",onClick:()=>{this.stepHandler(4)},children:Object(_.jsxs)("button",{className:"page-link",children:[Object(_.jsx)("span",{className:"badge bg-success",children:"Result 1"}),Object(_.jsx)("span",{className:"ms-1 text-success fw-bold",children:"Final sequence"})]})}),Object(_.jsx)("li",{className:"page-item","data-color":"success",onClick:()=>{this.stepHandler(5)},children:Object(_.jsxs)("button",{className:"page-link",children:[Object(_.jsx)("span",{className:"badge bg-success",children:"Result 2"}),Object(_.jsx)("span",{className:"ms-1 text-success fw-bold",children:"Oligos"})]})})]})}),Object(_.jsx)("button",{className:"btn btn-secondary me-2 float-end",onClick:()=>{this.resetState()},children:Object(_.jsx)("i",{class:"bi bi-arrow-clockwise"})})]}),Object(_.jsxs)("div",{id:"steps",className:"border alert alert-light mb-4",children:[Object(_.jsxs)("div",{className:"collapse show",children:[Object(_.jsx)("h3",{children:"Standard"}),Object(_.jsx)(g.a,{controlId:"partStandardInput",label:"Assembly Standard",children:Object(_.jsx)(u.a.Select,{onChange:this.partStandardChangeHandle,"aria-label":"Part standard input",children:this.partStandardInputItems})}),Object(_.jsx)("h3",{className:"mt-2",children:"Position"}),Object(_.jsx)(T,{standard:this.state.standard,oh:"5",cv:this.state.oh5,handler:this.OH5InputChangeHandle}),s,Object(_.jsx)(T,{standard:this.state.standard,oh:"3",cv:this.state.oh3,handler:this.OH3InputChangeHandle}),a,Object(_.jsx)("h3",{className:"mt-2",children:"Enzymes"}),Object(_.jsx)(u.a.Text,{className:"text-muted",children:"Domestication enzymes"}),Object(_.jsx)(o.a,{options:t,value:this.getEnzymesSelect(this.state.enzymes),isMulti:!0,className:"basic-multi-select mb-2",classNamePrefix:"select",onChange:this.domEnzymesInputChangeHandle}),Object(_.jsx)("h3",{className:"mt-2",children:"Parameters"}),Object(_.jsxs)("div",{children:[Object(_.jsx)(g.a,{controlId:"pcrMinLengthInput",label:"Length under which part is prepared by GBlock or oligo annealing instead of PCR",children:Object(_.jsx)(x.a,{onChange:this.pcrMinLengthInputChangeHandle,value:this.state.pcrMinLength,"aria-label":"pcr/oann min length"})}),Object(_.jsx)(g.a,{controlId:"pcrTmInput",label:"Tm PCR primers \xb0C",children:Object(_.jsx)(x.a,{onChange:this.pcrTmInputChangeHandle,value:this.state.pcrTm,"aria-label":"PCR Tm primers"})}),Object(_.jsx)(g.a,{controlId:"basePairsFromEnd",label:"Base pairs from end",children:Object(_.jsx)(x.a,{onChange:this.basePairsFromEndInputChangeHandle,value:this.state.base_pairs_from_end,"aria-label":"Base pairs from end"})})]}),Object(_.jsx)(N,{step:1,position:"b",stepHandler:this.stepHandler})]}),Object(_.jsxs)("div",{className:"collapse",children:[Object(_.jsx)("h3",{children:"Part name"}),Object(_.jsx)(g.a,{controlId:"nameInput",label:"Name Input",children:Object(_.jsx)(x.a,{onChange:this.nameInputChangeHandle,value:this.state.name,"aria-label":"Name Input"})}),Object(_.jsxs)("h3",{className:"mt-2",children:["Sequence (",this.state.sequence.length," bp)"]}),Object(_.jsxs)(g.a,{controlId:"sequenceInput",label:"Sequence Input",children:[Object(_.jsx)(x.a,{onChange:this.sequenceInputChangeHandle,as:"textarea",value:this.state.sequence,"aria-label":"Sequence Input"}),Object(_.jsx)(u.a.Text,{className:"text-muted",children:"Non ATGC characters are automatically removed."})]}),i,h,Object(_.jsx)(N,{step:2,position:"b",stepHandler:this.stepHandler})]}),n]})]})}}var L=k;s(213);i.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(L,{})}),document.getElementById("root-l0d"))}},[[214,1,2]]]);
//# sourceMappingURL=l0d.js.map